<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
Class Item extends CI_Controller { 
	function __construct(){ 		parent::__construct(); 				$this->data_request = $_REQUEST;				$module = $this->router->module;		$directory = $this->router->directory;		$class = $this->router->class;		$method = $this->router->method;		$directory = trim(str_replace('../modules/'.$module ,'',str_replace('/controllers/','',$directory)),'/');				$this->module = $module;		if(trim($directory) != ''){			$this->directory = $directory;		} else {			$this->directory = '0';			$this->directory2 = '';		}		$this->class = $class;		$this->method = $method;	}		function item_table(){		$view = 'view_item_base';		$get_field = $this->ecc_library->get_field($view);				$get_field['r1']['hidden'] = true;				$get_field['r12']['hidden'] = true;		$get_field['r13']['hidden'] = true;		$get_field['r14']['hidden'] = true;		$get_field['r15']['hidden'] = true;		$get_field['r16']['hidden'] = true;		$get_field['r17']['hidden'] = true;		$get_field['r18']['hidden'] = true;		$get_field['r19']['hidden'] = true;		$get_field['r20']['hidden'] = true;		$get_field['r21']['hidden'] = true;		$get_field['r22']['hidden'] = true;		$get_field['r23']['hidden'] = true;		$get_field['r24']['hidden'] = true;		$get_field['r25']['hidden'] = true;		$get_field['r26']['hidden'] = true;		$get_field['r27']['hidden'] = true;		$get_field['r28']['hidden'] = true;				$get_field['r29']['hidden'] = true;		$get_field['r30']['hidden'] = true;		$get_field['r31']['hidden'] = true;		$get_field['r32']['hidden'] = true;		$get_field['r33']['hidden'] = true;		$get_field['r34']['hidden'] = true;		$get_field['r35']['hidden'] = true;		$get_field['r36']['hidden'] = true;		$get_field['r37']['hidden'] = true;		$get_field['r38']['hidden'] = true;				$get_field['r2']['width'] = 120;		$get_field['r3']['width'] = 150;		$get_field['r4']['width'] = 180;		$get_field['r6']['width'] = 180;		$get_field['r9']['width'] = 170;		$get_field['r11']['width'] = 170;						return $get_field;	}		function index(){		$this->load->model('main');		$component['loadlayout'] = true;		$component['view_load'] = 'inventory/item/view';		$component['view_load_form'] = 'inventory/item/form';		$component['load_js'][] = 'inventory/item/view';		$component['load_js'][] = 'inventory/item/form';				$component['page_title'] = 'Item Base';						$dashboard_table = array();				$nav_button = array();		$nav_button[] = array('method_id' => 88,'title' => 'Add', 'icon' => 'fa fa-plus', 'load' => 'inventory/item/function_add');		$nav_button[] = array('method_id' => 89,'title' => 'Edit', 'icon' => 'fa fa-pencil', 'load' => 'inventory/item/function_edit');		$nav_button[] = array('method_id' => 91,'title' => 'Delete', 'icon' => 'fa fa-trash-o', 'load' => 'inventory/item/function_delete');				$field = $this->item_table();				$dashboard_table['nav_button'] = $nav_button;		$dashboard_table['field'] = $field;				$component['dashboard_table'] = $dashboard_table;				$this->authentication->ajaxlayout($component);	}		function loaddata(){		$this->authentication->plainlayout();				$view = 'view_item_base';		$field = $this->item_table();				$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error"; 		$loaddata = $this->ecc_library->get_field_data($view,$field);					echo $loaddata;	}		function add(){		// Button Permission	}		function edit(){		// Button Permission	}		function delete(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$item_base_id = isset($_POST['item_base_id']) ? $_POST['item_base_id'] : false;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($item_base_id){				$this->rpc_service->setSP("dbo.sp_item_base_delete");				$this->rpc_service->addField('item_base_id',$item_base_id);			} else {				$this->rpc_service->setSP("dbo.sp_item_base_add");			}								$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function post_add_edit(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$item_base_id = isset($_POST['item_base_id']) ? $_POST['item_base_id'] : false;		$item_base_code = isset($_POST['item_base_code']) ? $_POST['item_base_code'] : '';		$item_base_name = isset($_POST['item_base_name']) ? $_POST['item_base_name'] : '';		$item_category_id = isset($_POST['item_category_id']) ? $_POST['item_category_id'] : '';		$tax_group_id = isset($_POST['tax_group_id']) ? $_POST['tax_group_id'] : '';		$mb_flag_id = isset($_POST['mb_flag_id']) ? $_POST['mb_flag_id'] : '';		$custom_item_kite_type_id = isset($_POST['custom_item_kite_type_id']) ? $_POST['custom_item_kite_type_id'] : '';		$uom_id = isset($_POST['uom_id']) ? $_POST['uom_id'] : '';		$sales_gl_account_id = isset($_POST['sales_gl_account_id']) ? $_POST['sales_gl_account_id'] : '';		$inventory_gl_account_id = isset($_POST['inventory_gl_account_id']) ? $_POST['inventory_gl_account_id'] : '';		$cogs_gl_account_id = isset($_POST['cogs_gl_account_id']) ? $_POST['cogs_gl_account_id'] : '';		$adjustment_gl_account_id = isset($_POST['adjustment_gl_account_id']) ? $_POST['adjustment_gl_account_id'] : '';		$wip_gl_account_id = isset($_POST['wip_gl_account_id']) ? $_POST['wip_gl_account_id'] : '';		$hs_id = isset($_POST['hs_id']) ? $_POST['hs_id'] : '';		$merk = isset($_POST['merk']) ? $_POST['merk'] : '';		$tipe = isset($_POST['tipe']) ? $_POST['tipe'] : '';		$spesifikasi_lain = isset($_POST['spesifikasi_lain']) ? $_POST['spesifikasi_lain'] : '';				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($item_base_id){				$this->rpc_service->setSP("dbo.sp_item_base_edit");				$this->rpc_service->addField('item_base_id',$item_base_id);			} else {				$this->rpc_service->setSP("dbo.sp_item_base_add");			}						$item_base_code = $this->db->escape_str($item_base_code);			$item_base_name = $this->db->escape_str($item_base_name);						$this->rpc_service->addField('item_base_code',$item_base_code);			$this->rpc_service->addField('item_base_name',$item_base_name);			$this->rpc_service->addField('item_category_id',$item_category_id);			$this->rpc_service->addField('tax_group_id',$tax_group_id);			$this->rpc_service->addField('mb_flag_id',$mb_flag_id);			$this->rpc_service->addField('custom_item_kite_type_id',$custom_item_kite_type_id);			$this->rpc_service->addField('uom_id',$uom_id);			$this->rpc_service->addField('sales_gl_account_id',$sales_gl_account_id);			$this->rpc_service->addField('inventory_gl_account_id',$inventory_gl_account_id);			$this->rpc_service->addField('cogs_gl_account_id',$cogs_gl_account_id);			$this->rpc_service->addField('adjustment_gl_account_id',$adjustment_gl_account_id);			$this->rpc_service->addField('wip_gl_account_id',$wip_gl_account_id);			$this->rpc_service->addField('hs_id',$hs_id);			$this->rpc_service->addField('merk',$merk);			$this->rpc_service->addField('tipe',$tipe);			$this->rpc_service->addField('spesifikasi_lain',$spesifikasi_lain);									$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}
}?>