<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');Class Subcon_in extends CI_Controller { 	function __construct(){ 		parent::__construct(); 				$this->data_receive = $_REQUEST;				$module = $this->router->module;		$directory = $this->router->directory;		$class = $this->router->class;		$method = $this->router->method;		$directory = trim(str_replace('../modules/'.$module ,'',str_replace('/controllers/','',$directory)),'/');				$this->module = $module;		if(trim($directory) != ''){			$this->directory = $directory;		} else {			$this->directory = '0';			$this->directory2 = '';		}		$this->class = $class;		$this->method = $method;	}		function subcon_in_table() {		$view = 'view_subcon_in';		$get_field = $this->ecc_library->get_field($view);				$get_field['r1']['hidden'] = true;		$get_field['r15']['hidden'] = true;		$get_field['r16']['hidden'] = true;		$get_field['r17']['hidden'] = true;		$get_field['r18']['hidden'] = true;				return $get_field;	}		function subcon_in_detail_table() {		$view = 'view_subcon_in_detail';		$get_field = $this->ecc_library->get_field($view);				$get_field['r1']['hidden'] = true;		$get_field['r2']['hidden'] = true;				$get_field['r11']['hidden'] = true;		$get_field['r12']['hidden'] = true;		$get_field['r13']['hidden'] = true;		$get_field['r14']['hidden'] = true;		$get_field['r15']['hidden'] = true;								$get_field['act']['sc'] = 'act';		$get_field['act']['title'] = '#';		$get_field['act']['bypassvalue'] = '';		$get_field['act']['ctype'] = 'text';		$get_field['act']['align'] = 'center';		$get_field['act']['search'] = false;		$get_field['act']['sortable'] = false;		$get_field['act']['formatter'] = 'formatOperations';		$get_field['act']['width'] = 300;				return $get_field;	}		function subcon_in_receive_table() {		$view = 'view_stock_move_list_item_subcon_in';		$get_field = $this->ecc_library->get_field($view);				$get_field['r1']['hidden'] = true;		$get_field['r11']['hidden'] = true;		$get_field['r12']['hidden'] = true;		$get_field['r13']['hidden'] = true;				$get_field['r8']['title'] = "Unit";				$get_field['r6']['editable'] = true;		$get_field['r7']['editable'] = true;		$get_field['r8']['editable'] = true;		$get_field['r8']['edittype'] = 'select';		$get_field['r8']['formatter'] = 'select';				$array_test = array();		$array_test['value'] = $this->ecc_library->load_uom();				$get_field['r8']['editoptions'] = $array_test;				$get_field['r9']['editable'] = true;		$get_field['r10']['editable'] = true;				$get_field['act']['sc'] = 'act';		$get_field['act']['title'] = '#';		$get_field['act']['bypassvalue'] = '';		$get_field['act']['ctype'] = 'text';		$get_field['act']['align'] = 'center';		$get_field['act']['search'] = false;		$get_field['act']['sortable'] = false;		$get_field['act']['formatter'] = 'formatOperations2';		$get_field['act']['width'] = 300;				return $get_field;	}		function subcon_in_detail_supply_table() {		$view = 'view_subcon_in_list';		$get_field = $this->ecc_library->get_field($view);		$get_field['r1']['hidden'] = true;		$get_field['r2']['hidden'] = true;				return $get_field;	}		function subcon_in_transfer_item_table() {		$view = 'view_stock_move_item_subcon_in';		$get_field = $this->ecc_library->get_field($view);		$get_field['r1']['hidden'] = true;		$get_field['r12']['hidden'] = true;		$get_field['r13']['hidden'] = true;				return $get_field;	}		function subcon_in_supply_item_table() {		$view = 'view_stock_move_supply_subcon_in';		$get_field = $this->ecc_library->get_field($view);				$get_field['r1']['hidden'] = true;		$get_field['r12']['hidden'] = true;		$get_field['r13']['hidden'] = true;		$get_field['r14']['hidden'] = true;		return $get_field;	}		function index(){		$this->load->model('main');		$component['loadlayout'] = true;		$component['view_load'] = 'subcon/subcon_in/view';		$component['view_load_form'] = 'subcon/subcon_in/form';		$component['load_js'][] = 'subcon/subcon_in/view';		$component['load_js'][] = 'subcon/subcon_in/form';				$component['page_title'] = "Incoming Subcon";				$dashboard_table = array();				$nav_button = array();		$nav_button[] = array('method_id' => 438,'title' => 'Add', 'icon' => 'fa fa-plus', 'load' => 'subcon/subcon_in/function_add');		$nav_button[] = array('method_id' => 439,'title' => 'Edit', 'icon' => 'fa fa-pencil', 'load' => 'subcon/subcon_in/function_edit');		$nav_button[] = array('method_id' => 925,'title' => 'Set Target', 'icon' => 'fa fa-pencil', 'load' => 'subcon/subcon_in/function_supply');		$nav_button[] = array('method_id' => 441,'title' => 'Approve', 'icon' => 'fa fa-check', 'load' => 'subcon/subcon_in/function_approve');		$nav_button[] = array('method_id' => 440,'title' => 'Delete', 'icon' => 'fa fa-trash-o', 'load' => 'subcon/subcon_in/function_delete');		$nav_button[] = array('method_id' => 777,'title' => 'Cancel Approve', 'icon' => 'fa fa-check', 'load' => 'subcon/subcon_in/function_cancel_approve');				$field = $this->subcon_in_table();		$field_detail = $this->subcon_in_detail_table();		$field_receiver = $this->subcon_in_receive_table();		$field_detail_supply = $this->subcon_in_detail_supply_table();		$field_transfer_item = $this->subcon_in_transfer_item_table();		$field_supply_item = $this->subcon_in_supply_item_table();		$dashboard_table['field_detail'] = $field_detail;		$dashboard_table['field_detail_loaddata'] = 'loaddata_detail';		$dashboard_table['field_receiver'] = $field_receiver;		$dashboard_table['field_receiver_loaddata'] = 'loaddata_receive_item';		$dashboard_table['field_detail_supply'] = $field_detail_supply;		$dashboard_table['field_detail_supply_loaddata'] = 'loaddata_detail_supply';		$dashboard_table['field_transfer_item'] = $field_transfer_item;		$dashboard_table['field_transfer_item_loaddata'] = 'loaddata_transfer_item';		$dashboard_table['field_supply_item'] = $field_supply_item;		$dashboard_table['field_supply_item_loaddata'] = 'loaddata_supply_item';				$dashboard_table['nav_button'] = $nav_button;		$dashboard_table['field'] = $field;				$component['dashboard_table'] = $dashboard_table;				$this->authentication->ajaxlayout($component);	}		function loaddata() {		$this->authentication->plainlayout();				$view = 'view_subcon_in';		$field = $this->subcon_in_table();				$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error"; 		$loaddata = $this->ecc_library->get_field_data($view,$field);					echo $loaddata;	}			function approve(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : false;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($subcon_in_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_approve");				$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			}								$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function cancel_approve(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : false;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($subcon_in_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_cancel_approve");				$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			}								$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function delete(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : false;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($subcon_in_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_delete");				$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			}								$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}			function post_add_edit(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : '';		$receiver = isset($_POST['receiver']) ? $_POST['receiver'] : 0;		$partner_id = isset($_POST['partner_id']) ? $_POST['partner_id'] : '';		$contract_subcon_id = isset($_POST['contract_subcon_id']) ? $_POST['contract_subcon_id'] : '';		$subcon_in_memo = isset($_POST['subcon_in_memo']) ? $_POST['subcon_in_memo'] : '';		$currencies_id = isset($_POST['currencies_id']) ? $_POST['currencies_id'] : '';		$subcon_in_no = isset($_POST['subcon_in_no']) ? $_POST['subcon_in_no'] : '';		$subcon_in_date = isset($_POST['subcon_in_date']) ? $_POST['subcon_in_date'] : '';				$quantity_subcon = isset($_POST['quantity_subcon']) ? $_POST['quantity_subcon'] : array();		$unit_price = isset($_POST['unit_price']) ? $_POST['unit_price'] : array();		$subcon_price = isset($_POST['subcon_price']) ? $_POST['subcon_price'] : array();						$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){			if($subcon_in_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_edit");				$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			} else {				$this->rpc_service->setSP("dbo.sp_subcon_in_add");			}											$this->rpc_service->addField('subcon_in_no',$subcon_in_no);			$this->rpc_service->addField('subcon_in_date',$subcon_in_date);			$this->rpc_service->addField('receiver',$receiver);			$this->rpc_service->addField('partner_id',$partner_id);			$this->rpc_service->addField('contract_subcon_id',$contract_subcon_id);			$this->rpc_service->addField('subcon_in_memo',$subcon_in_memo);			$this->rpc_service->addField('currencies_id',$currencies_id);						$result = $this->rpc_service->resultJSON();						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$data_result = json_decode($result['data'],true);														$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];							$return['subcon_in_id'] = $data_result['subcon_in_id'];							$return['receiver'] = $data_result['receiver'];							$return['contract_subcon_id'] = $data_result['contract_subcon_id'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function loaddata_detail(){		$this->authentication->plainlayout();				$subcon_in_id = isset($_REQUEST['subcon_in_id']) ? is_numeric($_REQUEST['subcon_in_id']) ? $_REQUEST['subcon_in_id']  : -1 : -1;		$methodid = isset($_REQUEST['methodid']) ? is_numeric($_REQUEST['methodid']) ? $_REQUEST['methodid']  : -1 : -1;				$view = 'view_subcon_in_detail';		$field = $this->subcon_in_detail_table();				$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error";				$extra_param = array();		$extra_param['where']['0']['field'] = 'r2';		$extra_param['where']['0']['data'] = $subcon_in_id;		$extra_param['methodid'] = $methodid;				$loaddata = $this->ecc_library->get_field_data($view,$field,$extra_param);					echo $loaddata;	}		function post_add_edit_detail(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();				$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : 0;		$subcon_in_detail_id = isset($_POST['subcon_in_detail_id']) ? $_POST['subcon_in_detail_id'] : '';		$item_id = isset($_POST['item_id']) ? $_POST['item_id'] : '';		$quantity_subcon = isset($_POST['quantity_subcon']) ? $_POST['quantity_subcon'] : '';		$uom_id = isset($_POST['uom_id']) ? $_POST['uom_id'] : '';		$conversion = isset($_POST['conversion']) ? $_POST['conversion'] : '';		$unit_price = isset($_POST['unit_price']) ? $_POST['unit_price'] : '';		$subcon_price = isset($_POST['subcon_price']) ? $_POST['subcon_price'] : '';		$user_id = $this->session->userdata('user_id');						$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){			if($subcon_in_detail_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_detail_edit");				$this->rpc_service->addField('subcon_in_detail_id',$subcon_in_detail_id);			} else {				$this->rpc_service->setSP("dbo.sp_subcon_in_detail_add");			}						$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			$this->rpc_service->addField('item_id',$item_id);			$this->rpc_service->addField('quantity_subcon',$quantity_subcon);			$this->rpc_service->addField('uom_id',$uom_id);			$this->rpc_service->addField('conversion',$conversion);			$this->rpc_service->addField('unit_price',$unit_price);			$this->rpc_service->addField('subcon_price',$subcon_price);						$result = $this->rpc_service->resultJSON();						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$data = json_decode($result['data'],TRUE);														$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}						} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function delete_detail(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				$subcon_in_detail_id = isset($_POST['subcon_in_detail_id']) ? $_POST['subcon_in_detail_id'] : '';		$user_id = $this->session->userdata('user_id');						if(count($_POST) > 0){						if($subcon_in_detail_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_detail_delete");				$this->rpc_service->addField('subcon_in_detail_id',$subcon_in_detail_id);			}								$result = $this->rpc_service->resultJSON();						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}		echo json_encode($return);	}		function loaddata_receive_item(){		$this->authentication->plainlayout();		$return = array();				$field = $this->subcon_in_receive_table();				$contract_subcon_id = isset($_POST['contract_subcon_id']) ? is_numeric($_POST['contract_subcon_id']) ? $_POST['contract_subcon_id'] : -1: -1;		$subcon_in_detail_id = isset($_POST['subcon_in_detail_id']) ? is_numeric($_POST['subcon_in_detail_id']) ? $_POST['subcon_in_detail_id'] : -1: -1;		$subcon_in_date = isset($_POST['subcon_in_date']) ? $_POST['subcon_in_date'] : '1900-01-01';		$methodid = isset($_REQUEST['methodid']) ? is_numeric($_REQUEST['methodid']) ? $_REQUEST['methodid']  : -1 : -1;				$page = isset($_POST['page'])?$_POST['page']:1; // get the requested page         $rows = isset($_POST['rows'])?$_POST['rows']:10; // get how many rows we want to have into the grid         $sidx = isset($_POST['sidx'])?$_POST['sidx']:'r1'; // get index row - i.e. user click to sort         $sord = isset($_POST['sord'])?$_POST['sord']:'asc'; // get the direction 		$search = true; 		$filterRules =  isset($_POST['filters'])?$_POST['filters']:false;				$decode_filterRules = json_decode($filterRules,true);				if(isset($decode_filterRules)){			if(isset($decode_filterRules['rules'])){				$rules = $decode_filterRules['rules'];			} else {				$rules = array();			}		} else {			$decode_filterRules['groupOp'] = 'AND';			$rules = array();		}				$decode_filterRules['rules'] = $rules;		$filterRules = json_encode($decode_filterRules);				$limit =  $rows;		$offset =  $rows * ($page - 1);				$order = isset($_REQUEST['order']) ? $_REQUEST['order'] : array();				if($sord == 'asc'){			$sord = 1;		} else {			$sord = 2;		}				$sort =	$sidx. '='.$sord;								$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error";					$sp = "dbo.sp_stock_move_item_subcon_in_detail";			$this->rpc_service->setSP($sp);				if($subcon_in_detail_id){			$this->rpc_service->addField('subcon_in_detail_id',$subcon_in_detail_id);			}				$this->rpc_service->addField('contract_subcon_id',$contract_subcon_id);		$this->rpc_service->addField('subcon_in_date',$subcon_in_date);		$this->rpc_service->addField('methodid',$methodid);		$this->rpc_service->addField('sort',$sort);		$this->rpc_service->addField('limit',$limit);		$this->rpc_service->addField('offset',$offset);				$this->rpc_service->setWhere($search,$filterRules,$field);				$result = $this->rpc_service->resultJSON();			$data_result = json_decode($result['data'],true);				if(isset($data_result['detail']['result_count'])){			$records = $data_result['detail']['result_count'];			$total = ceil($data_result['detail']['result_count'] / $limit);		} else {			$records = 0;			$total = 0;		}				$responce = new stdclass();		$responce->page = $page;		$responce->records = $records;		$responce->total = $total;		$i=0; 		if($data_result){			if(isset($data_result['xrow'])){				foreach($data_result['xrow'] as $key=>$value){					foreach ($value as $k => $v) {						$responce->rows[$i][$k] = $v;					} 															$i++;				}			}		}					$return = json_encode($responce);					echo $return;	}		function loaddata_detail_supply(){		$this->authentication->plainlayout();				$subcon_in_id = isset($_REQUEST['subcon_in_id']) ? is_numeric($_REQUEST['subcon_in_id']) ? $_REQUEST['subcon_in_id']  : -1 : -1;		$methodid = isset($_REQUEST['methodid']) ? is_numeric($_REQUEST['methodid']) ? $_REQUEST['methodid']  : -1 : -1;				$view = 'view_subcon_in_list';		$field = $this->subcon_in_detail_supply_table();		$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error";				$extra_param = array();		$extra_param['where']['0']['field'] = 'r2';		$extra_param['where']['0']['data'] = $subcon_in_id;		$extra_param['methodid'] = $methodid;				$loaddata = $this->ecc_library->get_field_data($view,$field,$extra_param);					echo $loaddata;	}		function loaddata_transfer_item(){		$this->authentication->plainlayout();				$subcon_in_detail_id = isset($_REQUEST['subcon_in_detail_id']) ? is_numeric($_REQUEST['subcon_in_detail_id']) ? $_REQUEST['subcon_in_detail_id']  : -1 : -1;		$contract_subcon_id = isset($_REQUEST['contract_subcon_id']) ? is_numeric($_REQUEST['contract_subcon_id']) ? $_REQUEST['contract_subcon_id']  : -1 : -1;		$methodid = isset($_REQUEST['methodid']) ? is_numeric($_REQUEST['methodid']) ? $_REQUEST['methodid']  : -1 : -1;				$view = 'view_stock_move_item_subcon_in';		$field = $this->subcon_in_transfer_item_table();				$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error";				$extra_param = array();		$extra_param['where']['0']['field'] = 'r12';		$extra_param['where']['0']['data'] = $subcon_in_detail_id;		$extra_param['where']['0']['field'] = 'r13';		$extra_param['where']['0']['data'] = $contract_subcon_id;		$extra_param['methodid'] = $methodid;				$loaddata = $this->ecc_library->get_field_data($view,$field,$extra_param);					echo $loaddata;	}		function loaddata_supply_item(){		$this->authentication->plainlayout();				$subcon_in_detail_id = isset($_REQUEST['subcon_in_detail_id']) ? is_numeric($_REQUEST['subcon_in_detail_id']) ? $_REQUEST['subcon_in_detail_id']  : -1 : -1;		$methodid = isset($_REQUEST['methodid']) ? is_numeric($_REQUEST['methodid']) ? $_REQUEST['methodid']  : -1 : -1;				$view = 'view_stock_move_supply_subcon_in';		$field = $this->subcon_in_supply_item_table();				$return = array();		$return['valid'] = false;		$return['message'] = "Internal Server Error";				$extra_param = array();		$extra_param['where']['0']['field'] = 'r12';		$extra_param['where']['0']['data'] = $subcon_in_detail_id;		$extra_param['methodid'] = $methodid;				$loaddata = $this->ecc_library->get_field_data($view,$field,$extra_param);					echo $loaddata;	}		function post_add_edit_supply(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();				$stock_move_id = isset($_POST['stock_move_id']) ? $_POST['stock_move_id'] : false;		$subcon_in_detail_id = isset($_POST['subcon_in_detail_id']) ? $_POST['subcon_in_detail_id'] : 0;		$subcon_in_supply_id = isset($_POST['subcon_in_supply_id']) ? $_POST['subcon_in_supply_id'] : '';		$quantity_supply = isset($_POST['quantity_supply']) ? $_POST['quantity_supply'] : 0;		$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : 0;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){			if($subcon_in_supply_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_supply_edit");				$this->rpc_service->addField('subcon_in_supply_id',$subcon_in_supply_id);			} else {				$this->rpc_service->setSP("dbo.sp_subcon_in_supply_add");			}						$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			$this->rpc_service->addField('subcon_in_detail_id',$subcon_in_detail_id);			$this->rpc_service->addField('quantity_supply',$quantity_supply);			$this->rpc_service->addField('stock_move_id',$stock_move_id);						$result = $this->rpc_service->resultJSON();						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function auto_supply_fifo(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : false;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($subcon_in_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_supply_fifo");				$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			}								$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}		function auto_supply_lifo(){		$this->authentication->plainlayout();		$parameter = array();		$return = array();						$subcon_in_id = isset($_POST['subcon_in_id']) ? $_POST['subcon_in_id'] : false;				$user_id = $this->session->userdata('user_id');				$result = array();		$return['valid'] = false;		$return['status_code'] = 501;		$return['message'] = "Internal Server Error";				if(count($_POST) > 0){						if($subcon_in_id){				$this->rpc_service->setSP("dbo.sp_subcon_in_supply_lifo");				$this->rpc_service->addField('subcon_in_id',$subcon_in_id);			}								$result = $this->rpc_service->resultJSON();			// print_r($result);						$data = array();			if(isset($result)){				if(isset($result['valid'])){					if($result['valid']){						if(isset($result['data'])){							$return['valid'] = $result['valid'];							$return['status_code'] = $result['no'];							$return['message'] = $result['des'];						}					} else {						$return['status_code'] = $result['no'];						$return['message'] = $result['des'];					}				}			}					} else {			$return['valid'] = false;			$return['message'] = "Session expired";		}				echo json_encode($return);	}}?>